<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Arbstack Â· EPL Market Disagreement</title>

<style>
:root {
  --bg: #0e141b;
  --panel: #121a22;
  --text: #e8edf2;
  --muted: #9aa4af;
  --accent: #4da3ff;
  --hot: #ff4d4d;
  --amber: #ffb020;
  --cool: #4da3ff;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(180deg, #0b1118, #0e141b);
  color: var(--text);
}

header {
  padding: 24px 40px;
  border-bottom: 1px solid #1f2a36;
}

header h1 {
  margin: 0;
  font-size: 26px;
  font-weight: 600;
}

header p {
  margin: 6px 0 0;
  color: var(--muted);
}

main {
  padding: 32px 40px;
}

.toggle {
  margin: 16px 0 24px;
}

.toggle button {
  background: #18222d;
  border: 1px solid #223040;
  color: var(--text);
  padding: 6px 14px;
  margin-right: 6px;
  border-radius: 14px;
  cursor: pointer;
}

.toggle button.active {
  background: var(--accent);
  color: #000;
  font-weight: 600;
}

table {
  width: 100%;
  border-collapse: collapse;
  background: var(--panel);
  border-radius: 12px;
  overflow: hidden;
}

th, td {
  padding: 14px 14px;
  text-align: left;
  border-bottom: 1px solid #1f2a36;
  font-size: 14px;
}

th {
  color: var(--muted);
  font-weight: 600;
}

tr:last-child td {
  border-bottom: none;
}

.rank {
  color: var(--muted);
}

.delta {
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 999px;
  display: inline-block;
}

.delta.low { background: #2a313a; }
.delta.mid { background: #1d3550; color: #6bb6ff; }
.delta.high { background: #3b2a10; color: var(--amber); }
.delta.hot { background: #4a1616; color: var(--hot); }

.signal {
  font-size: 18px;
}

.footer-note {
  margin-top: 16px;
  color: var(--muted);
  font-size: 12px;
}
</style>
</head>

<body>

<header>
  <h1>âš½ EPL Market Disagreement Board</h1>
  <p>Kalshi Â· Polymarket Â· SportsLine (converted to probabilities)</p>
</header>

<main>

<div class="toggle">
  <button class="active">Today</button>
  <button>Yesterday</button>
  <button>Change</button>
</div>

<table>
<thead>
<tr>
  <th>Rank</th>
  <th>Match</th>
  <th>Kalshi (%)</th>
  <th>Polymarket (%)</th>
  <th>SportsLine (%)</th>
  <th>Spread Î”</th>
  <th>Signal</th>
</tr>
</thead>
<tbody id="board"></tbody>
</table>

<div class="footer-note">
  Snapshot demo Â· SportsLine odds converted to vig-adjusted probabilities Â· Not betting advice
</div>

</main>

<script>
// ---------- ODDS CONVERSION ----------
function americanToProb(odds) {
  if (odds < 0) return Math.abs(odds) / (Math.abs(odds) + 100);
  return 100 / (odds + 100);
}

function normalize(probs) {
  const sum = probs.reduce((a,b)=>a+b,0);
  return probs.map(p => p / sum);
}

// ---------- DATA (STATIC DEMO) ----------
const matches = [
  {
    match: "Leeds vs Fulham",
    kalshi: 0.43,
    poly: 0.44,
    sportsline: [+124, -124] // Leeds, Fulham
  },
  {
    match: "Wolves vs Newcastle",
    kalshi: 0.22,
    poly: 0.23,
    sportsline: [+346, -139]
  },
  {
    match: "Nottingham vs Arsenal",
    kalshi: 0.15,
    poly: 0.16,
    sportsline: [+488, -182]
  },
  {
    match: "Man Utd vs Man City",
    kalshi: 0.26,
    poly: 0.27,
    sportsline: [+284, -119]
  },
  {
    match: "Liverpool vs Burnley",
    kalshi: 0.81,
    poly: 0.81,
    sportsline: [-474, +1063]
  }
];

// ---------- BUILD TABLE ----------
const rows = matches.map(m => {
  const slRaw = m.sportsline.map(americanToProb);
  const slNorm = normalize(slRaw);

  const probs = [m.kalshi, m.poly, slNorm[0]];
  const spread = Math.max(...probs) - Math.min(...probs);

  let cls = "low", sig = "âšª";
  if (spread >= 0.05) { cls = "mid"; sig = "ðŸ‘€"; }
  if (spread >= 0.10) { cls = "high"; sig = "ðŸ‘€"; }
  if (spread >= 0.15) { cls = "hot"; sig = "ðŸ”¥"; }

  return { ...m, spread, cls, sig, sl: slNorm[0] };
})
.sort((a,b)=>b.spread - a.spread);

// ---------- RENDER ----------
const tbody = document.getElementById("board");

rows.forEach((r,i)=>{
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td class="rank">${i+1}</td>
    <td>${r.match}</td>
    <td>${(r.kalshi*100).toFixed(0)}%</td>
    <td>${(r.poly*100).toFixed(0)}%</td>
    <td>${(r.sl*100).toFixed(0)}%</td>
    <td><span class="delta ${r.cls}">${r.spread.toFixed(2)}</span></td>
    <td class="signal">${r.sig}</td>
  `;
  tbody.appendChild(tr);
});
</script>

</body>
</html>
